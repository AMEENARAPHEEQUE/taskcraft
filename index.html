<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Weekly Dashboard</title>
  <style>
    * {margin:0;padding:0;box-sizing:border-box;}
    body {font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;background:#0a0a0a;color:#e0e0e0;min-height:100vh;overflow-x:hidden;}
    .header {display:flex;justify-content:space-between;align-items:center;padding:20px;background:rgba(255,255,255,0.05);backdrop-filter:blur(10px);border-bottom:1px solid rgba(0,255,136,0.2);}
    .logo {font-size:24px;font-weight:bold;color:#00ff88;}
    .calendar-btn {background:rgba(0,255,136,0.2);border:1px solid #00ff88;color:#00ff88;padding:10px 15px;border-radius:8px;cursor:pointer;transition:0.3s;}
    .calendar-btn:hover {background:rgba(0,255,136,0.3);box-shadow:0 0 10px rgba(0,255,136,0.5);}
    .week-container {display:flex;gap:10px;padding:20px 15px;overflow-x:auto;max-width:100%;}
    .day-card {min-width:160px;max-width:160px;background:rgba(255,255,255,0.05);border-radius:12px;border:1px solid rgba(0,255,136,0.3);transition:0.3s;cursor:pointer;backdrop-filter:blur(10px);flex-shrink:0;}
    .day-card.current {transform:scale(1.05);box-shadow:0 10px 30px rgba(0,255,136,0.3);border-color:#00ff88;background:rgba(0,255,136,0.1);}
    .day-card.editing {transform:translateY(20px) scale(1.1);z-index:100;box-shadow:0 15px 40px rgba(0,255,136,0.4);border:2px solid #00ff88;margin:0 5px;}
    .day-header {padding:10px;border-bottom:1px solid rgba(0,255,136,0.2);text-align:center;}
    .day-name {font-size:14px;font-weight:bold;color:#00ff88;margin-bottom:3px;}
    .day-date {font-size:11px;color:#888;}
    .todos-list {padding:10px;min-height:120px;}
    .todo-item {display:flex;align-items:center;gap:6px;padding:6px;margin-bottom:6px;background:rgba(255,255,255,0.03);border-radius:6px;border-left:2px solid #00ff88;}
    .todo-checkbox {width:14px;height:14px;border-radius:3px;border:2px solid #00ff88;cursor:pointer;position:relative;flex-shrink:0;}
    .todo-checkbox.checked {background:#00ff88;}
    .todo-checkbox.checked::after {content:'âœ“';position:absolute;top:-2px;left:2px;color:#000;font-size:10px;font-weight:bold;}
    .todo-content {flex:1;font-size:11px;overflow:hidden;}
    .todo-meta {display:flex;gap:4px;font-size:9px;color:#888;margin-top:2px;}
    .priority {padding:1px 4px;border-radius:8px;font-size:8px;color:#fff;}
    .priority.high {background:#ff4757;} .priority.medium {background:#ffa726;} .priority.low {background:#66bb6a;}
    .edit-panel {position:fixed;bottom:0;left:0;right:0;background:rgba(0,0,0,0.95);backdrop-filter:blur(20px);padding:20px;transform:translateY(100%);transition:transform 0.4s ease;z-index:200;}
    .edit-panel.active {transform:translateY(0);}
    .edit-input {display:flex;gap:10px;align-items:center;background:rgba(255,255,255,0.1);border-radius:12px;padding:15px;border:1px solid rgba(0,255,136,0.3);}
    .edit-input input {flex:1;background:transparent;border:none;color:#e0e0e0;font-size:16px;outline:none;}
    .edit-input input::placeholder {color:#888;}
    .control-btn {background:rgba(0,255,136,0.2);border:1px solid #00ff88;color:#00ff88;padding:8px 12px;border-radius:8px;cursor:pointer;font-size:12px;transition:0.3s;}
    .control-btn:hover {background:rgba(0,255,136,0.3);}
    .calendar-modal {position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);backdrop-filter:blur(10px);display:none;align-items:center;justify-content:center;z-index:1000;}
    .calendar-content {background:rgba(26,26,46,0.95);border-radius:15px;padding:20px;border:1px solid rgba(0,255,136,0.3);max-width:400px;width:90%;}
    .calendar-grid {display:grid;grid-template-columns:repeat(7,1fr);gap:5px;margin-top:15px;}
    .calendar-day {padding:8px;text-align:center;border-radius:5px;cursor:pointer;transition:0.3s;}
    .calendar-day.has-todos{background:#ffa726;color:#000;}
    .calendar-day.overdue{background:#ff4757;color:#fff;}
    .calendar-day.completed{background:#66bb6a;color:#fff;}
    .toast {position:fixed;top:20px;right:20px;background:rgba(0,255,136,0.9);color:#000;padding:10px 15px;border-radius:8px;transform:translateX(300px);transition:transform 0.3s ease;z-index:1001;}
    .toast.show {transform:translateX(0);}
  </style>
</head>
<body>
  <div class="header">
    <div class="logo">TaskCraft AI</div>
    <button class="calendar-btn" onclick="openCalendar()">ðŸ“… Calendar</button>
  </div>

  <div class="week-container" id="weekContainer"></div>

  <div class="edit-panel" id="editPanel">
    <div id="editDayLabel" style="margin-bottom:10px;color:#00ff88;font-weight:bold;"></div>
    <div class="edit-input">
      <input type="text" id="todoInput" placeholder="What needs to be done?"/>
      <div class="control-btn" onclick="togglePriority()">Priority: <span id="priorityValue">5</span></div>
      <div class="control-btn" onclick="toggleTime()">Time: <span id="timeValue">30min</span></div>
      <div class="control-btn" onclick="addTodo()">Add</div>
      <div class="control-btn" onclick="closeEdit()">Close</div>
    </div>
  </div>

  <div class="calendar-modal" id="calendarModal">
    <div class="calendar-content">
      <h3 style="color:#00ff88;margin-bottom:15px;">Select Date</h3>
      <div>
        <select id="monthSelect"></select>
        <select id="yearSelect"></select>
      </div>
      <div class="calendar-grid" id="calendarGrid"></div>
      <div style="margin-top:15px;text-align:center;">
        <button class="control-btn" onclick="closeCalendar()">Close</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">Saved!</div>

  <script>
    let currentWeek=[],currentEditingDay=null,currentPriority=5,currentTime=30;
    let allTasks=JSON.parse(localStorage.getItem('tasks')||'{}');

    function init(){
      generateCurrentWeek(new Date());
      renderWeekCards();
      setupEventListeners();
      initCalendar();
    }

    function generateCurrentWeek(date){
      const monday=new Date(date);
      const dayOfWeek=monday.getDay();
      const diff=monday.getDate()-dayOfWeek+(dayOfWeek===0?-6:1);
      monday.setDate(diff);
      currentWeek=[];
      for(let i=0;i<7;i++){
        const d=new Date(monday);d.setDate(monday.getDate()+i);
        currentWeek.push({
          date:new Date(d),
          dayName:d.toLocaleDateString('en',{weekday:'short'}),
          dateStr:d.toLocaleDateString('en',{month:'short',day:'numeric'}),
          dateKey:d.toISOString().split('T')[0],
          isToday:d.toDateString()===new Date().toDateString()
        });
      }
    }

    function renderWeekCards(){
      const container=document.getElementById('weekContainer');
      container.innerHTML='';
      currentWeek.forEach(day=>{
        const card=document.createElement('div');
        card.className=`day-card ${day.isToday?'current':''}`;
        card.setAttribute('data-day',day.dateKey);
        const tasks=(allTasks[day.dateKey]||[]).sort((a,b)=>a.priority-b.priority||a.time-b.time);
        card.innerHTML=`
          <div class="day-header">
            <div class="day-name">${day.dayName}</div>
            <div class="day-date">${day.dateStr}</div>
          </div>
          <div class="todos-list">
            ${tasks.map(t=>`
              <div class="todo-item">
                <div class="todo-checkbox ${t.completed?'checked':''}" onclick="toggleTask('${day.dateKey}',${t.id})"></div>
                <div class="todo-content">
                  <div style="${t.completed?'text-decoration:line-through;opacity:0.6;':''}">${t.description}</div>
                  <div class="todo-meta">
                    <span class="priority ${t.priority<=5?'high':t.priority<=10?'medium':'low'}">P${t.priority}</span>
                    <span>${t.time}min</span>
                  </div>
                </div>
                <div class="control-btn" onclick="deleteTask('${day.dateKey}',${t.id})" style="font-size:10px;padding:2px 4px;">ðŸ—‘</div>
              </div>
            `).join('')}
          </div>`;
        card.onclick=e=>{if(!e.target.closest('.todo-checkbox')&&!e.target.closest('.control-btn')) editDay(day.dateKey);};
        container.appendChild(card);
      });
    }

    function editDay(dateKey){
      currentEditingDay=dateKey;
      const label=document.getElementById('editDayLabel');
      label.textContent="Adding tasks for: "+new Date(dateKey).toDateString();
      document.querySelectorAll('.day-card').forEach(c=>{
        c.style.opacity=c.getAttribute('data-day')===dateKey?'1':'0.3';
        if(c.getAttribute('data-day')===dateKey) c.classList.add('editing');
      });
      document.getElementById('editPanel').classList.add('active');
      document.getElementById('todoInput').focus();
    }

    function closeEdit(){
      document.getElementById('editPanel').classList.remove('active');
      document.querySelectorAll('.day-card').forEach(c=>{c.style.opacity='1';c.classList.remove('editing');});
      currentEditingDay=null;
    }

    function addTodo(){
      const input=document.getElementById('todoInput');const desc=input.value.trim();
      if(!desc||!currentEditingDay)return;
      const task={id:Date.now(),description:desc,priority:currentPriority,time:currentTime,completed:false};
      if(!allTasks[currentEditingDay]) allTasks[currentEditingDay]=[];
      allTasks[currentEditingDay].push(task);
      saveData();
      generateCurrentWeek(new Date(currentEditingDay));
      renderWeekCards();
      input.value='';
      showToast('Task added!');
    }

    function toggleTask(dk,id){const t=allTasks[dk]?.find(t=>t.id===id);if(t){t.completed=!t.completed;saveData();renderWeekCards();}}
    function deleteTask(dk,id){if(!allTasks[dk])return;allTasks[dk]=allTasks[dk].filter(t=>t.id!==id);saveData();renderWeekCards();}
    function togglePriority(){currentPriority=currentPriority>=15?1:currentPriority+1;document.getElementById('priorityValue').textContent=currentPriority;}
    function toggleTime(){const times=[5,10,15,20,30,45,60];currentTime=times[(times.indexOf(currentTime)+1)%times.length];document.getElementById('timeValue').textContent=currentTime+'min';}
    function openCalendar(){document.getElementById('calendarModal').style.display='flex';generateCalendar();}
    function closeCalendar(){document.getElementById('calendarModal').style.display='none';}
    function initCalendar(){
      const mSel=document.getElementById('monthSelect'),ySel=document.getElementById('yearSelect'),today=new Date();
      const months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
      months.forEach((m,i)=>{let o=document.createElement('option');o.value=i;o.textContent=m;if(i===today.getMonth())o.selected=true;mSel.appendChild(o);});
      for(let y=today.getFullYear()-1;y<=today.getFullYear()+2;y++){let o=document.createElement('option');o.value=y;o.textContent=y;if(y===today.getFullYear())o.selected=true;ySel.appendChild(o);}
      mSel.onchange=ySel.onchange=generateCalendar;
    }
    function generateCalendar(){
      const mSel=document.getElementById('monthSelect'),ySel=document.getElementById('yearSelect'),grid=document.getElementById('calendarGrid');
      const month=parseInt(mSel.value),year=parseInt(ySel.value);grid.innerHTML='';
      ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(d=>{let h=document.createElement('div');h.textContent=d;h.style.fontWeight='bold';h.style.color='#00ff88';grid.appendChild(h);});
      const first=new Date(year,month,1),last=new Date(year,month+1,0),start=new Date(first);start.setDate(start.getDate()-first.getDay());
      for(let i=0;i<42;i++){let date=new Date(start);date.setDate(start.getDate()+i);let dk=date.toISOString().split('T')[0];
        const cell=document.createElement('div');cell.className='calendar-day';cell.textContent=date.getDate();if(date.getMonth()!==month)cell.style.opacity='0.3';
        const tasks=allTasks[dk]||[];
        if(tasks.length>0)cell.classList.add('has-todos');
        cell.onclick=()=>{closeCalendar();generateCurrentWeek(date);renderWeekCards();editDay(dk);};
        grid.appendChild(cell);
      }
    }
    function setupEventListeners(){document.getElementById('todoInput').addEventListener('keypress',e=>{if(e.key==='Enter')addTodo();});document.addEventListener('click',e=>{if(e.target.id==='calendarModal')closeCalendar();});}
    function saveData(){localStorage.setItem('tasks',JSON.stringify(allTasks));}
    function showToast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2000);}
    init();
  </script>
</body>
</html>
